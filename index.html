<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlashMaster - Interactive Study Cards & Quizzes</title>
    
    <!-- External Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">⚡ FlashMaster</div>
            <div class="subtitle">Next-Generation Interactive Study Platform</div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('upload', event)">📁 Upload</button>
            <button class="nav-tab" onclick="switchTab('study', event)">🎯 Study</button>
            <button class="nav-tab" onclick="switchTab('quiz', event)">🧪 Quiz</button>
            <button class="nav-tab" onclick="switchTab('progress', event)">📊 Analytics</button>
            <button class="nav-tab" onclick="switchTab('settings', event)">⚙️ Settings</button>
        </div>

        <!-- Upload Tab -->
        <div id="upload" class="tab-content active">
            <div class="upload-section">
                <h2>📁 Upload Flashcard Set</h2>
                <p>Import your JSON file to start learning</p>
                
                <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                    <div style="font-size: 3em; margin-bottom: 16px;">📄</div>
                    <div style="font-size: 1.2em; margin-bottom: 12px;">Drop your JSON file here</div>
                    <div style="color: rgba(228, 228, 231, 0.6);">or click to browse</div>
                </div>
                
                <input type="file" id="fileInput" class="file-input" accept=".json" onchange="loadFlashcards(event)">
                
                <div class="json-format">
                    <h3>📋 JSON Format Specification:</h3>
                    <pre>{
  "topic": "Advanced JavaScript",
  "description": "Modern JavaScript concepts and patterns",
  "cards": [
    {
      "id": 1,
      "question": "What is a closure in JavaScript?",
      "answer": "A closure gives you access to an outer function's scope from an inner function.",
      "difficulty": "medium",
      "choices": [
        "A closure gives you access to an outer function's scope from an inner function.",
        "A closure is a way to create private variables.",
        "A closure is used to close browser windows.",
        "A closure is a type of JavaScript loop."
      ],
      "correctChoices": [0]
    }
  ]
}</pre>
                    <p style="margin-top: 16px;"><strong>Difficulty levels:</strong> easy (🟢), medium (🔵), hard (🟠), expert (🔴)</p>
                </div>
            </div>
        </div>

        <!-- Study Tab -->
        <div id="study" class="tab-content">
            <div id="studyContent" style="display: none;">
                <div class="mode-selector">
                    <button class="mode-btn active" onclick="setStudyMode('flashcard')">💳 Flashcard Mode</button>
                </div>

                <div class="stats">
                    <h2>📈 Session Progress</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="currentCard">0</div>
                            <div class="stat-label">Current Card</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalCards">0</div>
                            <div class="stat-label">Total Cards</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="correctCount">0</div>
                            <div class="stat-label">Correct</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="currentAccuracy">0%</div>
                            <div class="stat-label">Accuracy</div>
                        </div>
                    </div>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%">0%</div>
                    </div>
                </div>

                <div class="flashcard-container">
                    <div class="flashcard" id="flashcard" onclick="flipCard()">
                        <div class="card-face card-front" id="cardFront">
                            <div id="questionText">Ready to start learning?</div>
                            <div class="difficulty-indicator" id="difficultyIndicator"></div>
                        </div>
                        <div class="card-face card-back" id="cardBack">
                            <div id="answerText">Answer appears here</div>
                        </div>
                    </div>
                </div>

                <div class="controls">
                    <button class="btn btn-incorrect" onclick="markAnswer(false)" id="incorrectBtn" style="display: none;">❌ Incorrect</button>
                    <button class="btn btn-correct" onclick="markAnswer(true)" id="correctBtn" style="display: none;">✅ Correct</button>
                    <button class="btn btn-next" onclick="nextCard()" id="nextBtn">▶️ Start</button>
                </div>

                <div id="sessionComplete" style="display: none;" class="stats">
                    <h2>🎉 Session Complete!</h2>
                    <div id="finalResults"></div>
                    <button class="btn btn-next" onclick="restartSession()">🔄 Study Again</button>
                </div>
            </div>

            <div id="noCardsMessage" class="upload-section">
                <h2>📚 No Flashcards Loaded</h2>
                <p>Upload your JSON file to get started</p>
                <button class="btn btn-next" onclick="switchTab('upload', event)">📁 Upload Cards</button>
            </div>
        </div>

        <!-- Quiz Tab -->
        <div id="quiz" class="tab-content">
            <div id="quizContent" style="display: none;">
                <div class="mode-selector">
                    <button class="mode-btn active" onclick="setQuizMode('single')">🎯 Single Choice</button>
                    <button class="mode-btn" onclick="setQuizMode('multiple')">✅ Multiple Choice</button>
                    <button class="mode-btn" onclick="setQuizMode('timed')">⏱️ Timed Quiz</button>
                </div>

                <div class="stats">
                    <h2>🧪 Quiz Session</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="quizCurrentCard">0</div>
                            <div class="stat-label">Current Question</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="quizTotalCards">0</div>
                            <div class="stat-label">Total Questions</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="quizCorrectCount">0</div>
                            <div class="stat-label">Correct</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="quizCurrentAccuracy">0%</div>
                            <div class="stat-label">Accuracy</div>
                        </div>
                    </div>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" id="quizProgressFill" style="width: 0%">0%</div>
                    </div>
                </div>

                <div id="quizTimer" class="quiz-timer" style="display: none;">⏱️ Time Remaining: <span id="timeLeft">60</span>s</div>

                <div class="quiz-container">
                    <div class="quiz-question" id="quizQuestion">Ready to test your knowledge?</div>
                    <div class="quiz-options" id="quizOptions"></div>
                    <div class="controls">
                        <button class="btn btn-next" onclick="submitQuizAnswer()" id="quizSubmitBtn" style="display: none;">Submit Answer</button>
                        <button class="btn btn-next" onclick="nextQuizQuestion()" id="quizNextBtn">▶️ Start Quiz</button>
                    </div>
                </div>

                <div id="quizComplete" style="display: none;" class="stats">
                    <h2>🎉 Quiz Complete!</h2>
                    <div id="quizFinalResults"></div>
                    <div class="controls">
                        <button class="btn btn-next" onclick="restartQuiz()">🔄 Retake Quiz</button>
                        <button class="btn btn-correct" onclick="downloadQuizResults()">📥 Download Results</button>
                    </div>
                </div>
            </div>

            <div id="noQuizMessage" class="upload-section">
                <h2>🧪 Quiz Mode Unavailable</h2>
                <p>Upload JSON with quiz choices to enable quiz mode</p>
                <button class="btn btn-next" onclick="switchTab('upload', event)">📁 Upload Cards</button>
            </div>
        </div>

        <!-- Progress Tab -->
        <div id="progress" class="tab-content">
            <div class="chart-container">
                <h2>📊 Performance Analytics</h2>
                <canvas id="progressChart" width="400" height="200"></canvas>
            </div>
            
            <div class="stats">
                <h2>📈 Lifetime Statistics</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalSessions">0</div>
                        <div class="stat-label">Study Sessions</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalQuizzes">0</div>
                        <div class="stat-label">Quizzes Taken</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="overallAccuracy">0%</div>
                        <div class="stat-label">Overall Accuracy</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="passingSessions">0</div>
                        <div class="stat-label">Passing Sessions</div>
                    </div>
                </div>
                
                <div class="progress-section">
                    <button class="progress-btn" onclick="exportProgress()">📤 Export Progress</button>
                    <button class="progress-btn" onclick="document.getElementById('progressImport').click()">📥 Import Progress</button>
                    <button class="btn btn-secondary" onclick="clearProgress()">🗑️ Clear All Data</button>
                    <input type="file" id="progressImport" accept=".json" style="display: none;" onchange="importProgress(event)">
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
            <div class="settings">
                <h2>⚙️ Configuration</h2>
                
                <div class="setting-group">
                    <label class="setting-label" for="passingThreshold">🎯 Passing Threshold (%)</label>
                    <input type="number" id="passingThreshold" class="setting-input" min="0" max="100" value="70">
                    <p style="margin-top: 12px; color: rgba(228, 228, 231, 0.7);">Minimum accuracy to pass a session</p>
                </div>
                
                <div class="setting-group">
                    <label class="setting-label" for="shuffleCards">🔀 Card Randomization</label>
                    <select id="shuffleCards" class="setting-input">
                        <option value="true">Enabled - Randomize order</option>
                        <option value="false">Disabled - Sequential order</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="quizTimeLimit">⏱️ Quiz Timer (seconds)</label>
                    <input type="number" id="quizTimeLimit" class="setting-input" min="10" max="300" value="60">
                    <p style="margin-top: 12px; color: rgba(228, 228, 231, 0.7);">Time limit for timed quiz mode</p>
                </div>
                
                <div class="setting-group">
                    <label class="setting-label">📚 Current Dataset</label>
                    <div id="currentTopic" style="padding: 16px; background: rgba(255, 255, 255, 0.05); border-radius: 12px; margin-top: 12px; border: 1px solid rgba(255, 255, 255, 0.1);">
                        No flashcards loaded
                    </div>
                </div>
                
                <button class="btn btn-next" onclick="saveSettings()">💾 Save Configuration</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>
</html>
